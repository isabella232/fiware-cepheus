<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="797" height="782"><source><![CDATA[IoT Agent->Cepheus Broker: /register(Room*)
Cepheus Broker->Orion: /register(Room*)
IoT Agent->Cepheus Broker: /register(Shutter*)
Cepheus Broker->Orion: /register(Shutter*)
Orion->Cepheus Broker: /query(Room*)
Cepheus Broker->IoT Agent: /query(Room*)
Note over IoT Agent: computes temperatures
IoT Agent->Cepheus Broker: response(temperatures)
Cepheus Broker->Orion: response(temperatures)
Orion->Cepheus Broker: /query(Shutter21)
Cepheus Broker->IoT Agent: /query(Shutter21)
Note over IoT Agent: computes status of Shutter21
IoT Agent->Cepheus Broker: response(Shutter21='closed')
Cepheus Broker->Orion: response(Shutter21='closed')
Orion->Cepheus Broker: /update(Shutter21,'opened')
Cepheus Broker->IoT Agent: /update(Shutter21, 'opened')]]></source><desc>Created with RaphaÃ«l 2.1.2</desc><defs><path id="raphael-marker-block" stroke-linecap="round" d="M5,0 0,2.5 5,5z"/><marker id="raphael-marker-endblock55-obj46678" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46681" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46684" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46687" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46690" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46693" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46699" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46702" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46705" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46708" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46714" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46717" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46720" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj46723" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker></defs><rect width="108.4" height="39" x="96.2" y="20" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="88.4" height="19" x="106.2" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text x="150.4" y="39.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">IoT Agent</tspan></text><rect width="108.4" height="39" x="96.2" y="723" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="88.4" height="19" x="106.2" y="733" fill="#fff" stroke="none" rx="0" ry="0"/><text x="150.4" y="742.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">IoT Agent</tspan></text><path fill="none" stroke="#000" stroke-width="2" d="M150.39999389648438,59L150.39999389648438,723"/><rect width="156.4" height="39" x="363" y="20" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="136.4" height="19" x="373" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text x="441.2" y="39.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">Cepheus Broker</tspan></text><rect width="156.4" height="39" x="363" y="723" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="136.4" height="19" x="373" y="733" fill="#fff" stroke="none" rx="0" ry="0"/><text x="441.2" y="742.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">Cepheus Broker</tspan></text><path fill="none" stroke="#000" stroke-width="2" d="M441.1999816894531,59L441.1999816894531,723"/><rect width="70" height="39" x="697" y="20" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="50" height="19" x="707" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text x="732" y="39.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">Orion</tspan></text><rect width="70" height="39" x="697" y="723" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="50" height="19" x="707" y="733" fill="#fff" stroke="none" rx="0" ry="0"/><text x="732" y="742.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">Orion</tspan></text><path fill="none" stroke="#000" stroke-width="2" d="M731.9999694824219,59L731.9999694824219,723"/><rect width="155.6" height="19" x="218" y="74.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="295.8" y="84" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/register(Room*)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46678)" d="M150.39999389648438,98C150.39999389648438,98,397.73377342889853,98,436.19852381028227,98"/><rect width="155.6" height="19" x="508.8" y="113.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="586.6" y="123" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/register(Room*)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46681)" d="M441.1999816894531,137C441.1999816894531,137,688.5337612218673,137,726.998511603251,137"/><rect width="184.4" height="19" x="203.6" y="152.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="295.8" y="162" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/register(Shutter*)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46684)" d="M150.39999389648438,176C150.39999389648438,176,397.73377342889853,176,436.19852381028227,176"/><rect width="184.4" height="19" x="494.4" y="191.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="586.6" y="201" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/register(Shutter*)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46687)" d="M441.1999816894531,215C441.1999816894531,215,688.5337612218673,215,726.998511603251,215"/><rect width="126.8" height="19" x="523.2" y="230.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="586.6" y="240" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/query(Room*)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46690)" d="M731.9999694824219,254C731.9999694824219,254,484.6661899500077,254,446.201439568624,254"/><rect width="126.8" height="19" x="232.4" y="269.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="295.8" y="279" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/query(Room*)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46693)" d="M441.1999816894531,293C441.1999816894531,293,193.86620215703897,293,155.40145177565523,293"/><rect width="213.6" height="29" x="43.6" y="313" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="203.6" height="19" x="48.6" y="318" fill="#fff" stroke="none" rx="0" ry="0"/><text x="150.4" y="327.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">computes temperatures</tspan></text><rect width="213.2" height="19" x="189.2" y="357.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="295.8" y="367" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">response(temperatures)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46699)" d="M150.39999389648438,381C150.39999389648438,381,397.73377342889853,381,436.19852381028227,381"/><rect width="213.2" height="19" x="480" y="396.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="586.6" y="406" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">response(temperatures)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46702)" d="M441.1999816894531,420C441.1999816894531,420,688.5337612218673,420,726.998511603251,420"/><rect width="165.2" height="19" x="504" y="435.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="586.6" y="445" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/query(Shutter21)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46705)" d="M731.9999694824219,459C731.9999694824219,459,484.6661899500077,459,446.201439568624,459"/><rect width="165.2" height="19" x="213.2" y="474.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="295.8" y="484" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/query(Shutter21)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46708)" d="M441.1999816894531,498C441.1999816894531,498,193.86620215703897,498,155.40145177565523,498"/><rect width="280.8" height="29" x="10" y="518" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="270.8" height="19" x="15" y="523" fill="#fff" stroke="none" rx="0" ry="0"/><text x="150.4" y="532.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">computes status of Shutter21</tspan></text><rect width="270.8" height="19" x="160.4" y="562.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="295.8" y="572" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">response(Shutter21=&apos;closed&apos;)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46714)" d="M150.39999389648438,586C150.39999389648438,586,397.73377342889853,586,436.19852381028227,586"/><rect width="270.8" height="19" x="451.2" y="601.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="586.6" y="611" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">response(Shutter21=&apos;closed&apos;)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46717)" d="M441.1999816894531,625C441.1999816894531,625,688.5337612218673,625,726.998511603251,625"/><rect width="261.2" height="19" x="456" y="640.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="586.6" y="650" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/update(Shutter21,&apos;opened&apos;)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46720)" d="M731.9999694824219,664C731.9999694824219,664,484.6661899500077,664,446.201439568624,664"/><rect width="270.8" height="19" x="160.4" y="679.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="295.8" y="689" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/update(Shutter21, &apos;opened&apos;)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj46723)" d="M441.1999816894531,703C441.1999816894531,703,193.86620215703897,703,155.40145177565523,703"/></svg>