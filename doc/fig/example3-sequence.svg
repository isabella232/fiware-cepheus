<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="670" height="455"><source><![CDATA[participant run.sh as S
participant Cepheus Broker as LB
participant Cepheus CEP as CEP

S->CEP: POST /admin/config
CEP->LB: subscribe(Room.*)
S->LB: update(Room11, 22°)
LB->CEP: notify(Room11, 22°)
S->LB: update(Room12, 24°)
LB->CEP: notify(Room12, 24°)
Note over CEP: computes floor average
CEP->LB: update(Floor1, 23°)]]></source><desc>Created with Raphaël 2.1.2</desc><defs><path id="raphael-marker-block" stroke-linecap="round" d="M5,0 0,2.5 5,5z"/><marker id="raphael-marker-endblock55-obj2858" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj2861" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj2864" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj2867" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj2870" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj2873" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj2879" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker></defs><rect width="78.6" height="38.5" x="10" y="20" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="58.6" height="18.5" x="20" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text x="49.3" y="39.25" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">run.sh</tspan></text><rect width="78.6" height="38.5" x="10" y="396.5" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="58.6" height="18.5" x="20" y="406.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="49.3" y="415.75" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">run.sh</tspan></text><path fill="none" stroke="#000" stroke-width="2" d="M49.29999923706055,58.5L49.29999923706055,396.5"/><rect width="155.4" height="38.5" x="175" y="20" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="135.4" height="18.5" x="185" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text x="252.7" y="39.25" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">Cepheus Broker</tspan></text><rect width="155.4" height="38.5" x="175" y="396.5" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="135.4" height="18.5" x="185" y="406.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="252.7" y="415.75" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">Cepheus Broker</tspan></text><path fill="none" stroke="#000" stroke-width="2" d="M252.69999313354492,58.5L252.69999313354492,396.5"/><rect width="126.6" height="38.5" x="392.8" y="20" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="106.6" height="18.5" x="402.8" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text x="456.1" y="39.25" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">Cepheus CEP</tspan></text><rect width="126.6" height="38.5" x="392.8" y="396.5" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="106.6" height="18.5" x="402.8" y="406.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="456.1" y="415.75" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">Cepheus CEP</tspan></text><path fill="none" stroke="#000" stroke-width="2" d="M456.0999870300293,58.5L456.0999870300293,396.5"/><rect width="173.8" height="18.5" x="165.8" y="74.25" fill="#fff" stroke="none" rx="0" ry="0"/><text x="252.7" y="83.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">POST /admin/config</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2858)" d="M49.29999923706055,97C49.29999923706055,97,404.60792352695717,97,451.10329643208036,97"/><rect width="164.2" height="18.5" x="272.3" y="112.75" fill="#fff" stroke="none" rx="0" ry="0"/><text x="354.4" y="122" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">subscribe(Room.*)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2861)" d="M456.0999870300293,135.5C456.0999870300293,135.5,288.9597791162323,135.5,257.7026015620408,135.5"/><rect width="183.4" height="18.5" x="59.3" y="151.25" fill="#fff" stroke="none" rx="0" ry="0"/><text x="151" y="160.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">update(Room11, 22°)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2864)" d="M49.29999923706055,174C49.29999923706055,174,216.44020715085753,174,247.69738470504907,174"/><rect width="183.4" height="18.5" x="262.7" y="189.75" fill="#fff" stroke="none" rx="0" ry="0"/><text x="354.4" y="199" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">notify(Room11, 22°)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2867)" d="M252.69999313354492,212.5C252.69999313354492,212.5,419.8402010473419,212.5,451.0973786015334,212.5"/><rect width="183.4" height="18.5" x="59.3" y="228.25" fill="#fff" stroke="none" rx="0" ry="0"/><text x="151" y="237.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">update(Room12, 24°)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2870)" d="M49.29999923706055,251C49.29999923706055,251,216.44020715085753,251,247.69738470504907,251"/><rect width="183.4" height="18.5" x="262.7" y="266.75" fill="#fff" stroke="none" rx="0" ry="0"/><text x="354.4" y="276" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">notify(Room12, 24°)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2873)" d="M252.69999313354492,289.5C252.69999313354492,289.5,419.8402010473419,289.5,451.0973786015334,289.5"/><rect width="222.2" height="28.5" x="345" y="309.5" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="212.2" height="18.5" x="350" y="314.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="456.1" y="323.75" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">computes floor average</tspan></text><rect width="183.4" height="18.5" x="262.7" y="353.75" fill="#fff" stroke="none" rx="0" ry="0"/><text x="354.4" y="363" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.75">update(Floor1, 23°)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2879)" d="M456.0999870300293,376.5C456.0999870300293,376.5,288.9597791162323,376.5,257.7026015620408,376.5"/></svg>