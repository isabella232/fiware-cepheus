<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="910" height="665"><source><![CDATA[run.sh->Cepheus CEP: POST /admin/config
Cepheus CEP->Cepheus Broker: /subscribe(Room*)
IoT Agent->Cepheus Broker: /register(Shutter*)
IoT Agent->Cepheus Broker: /update(Room11, 26°)
Cepheus Broker->Cepheus CEP: /notify(Room11, 26°)
Note over Cepheus CEP: computes shutter status
Cepheus CEP-> Cepheus Broker: /update(Shutter11, 'closed')
Cepheus Broker->IoT Agent: /update(Shutter11, 'closed')
IoT Agent->Cepheus Broker: /update(Room11, 23°)
Cepheus Broker->Cepheus CEP: /notify(Room11, 23°)
Note over Cepheus CEP: computes shutter status
Cepheus CEP-> Cepheus Broker: /update(Shutter11, 'opened')
Cepheus Broker->IoT Agent: /update(Shutter11, 'opened')]]></source><desc>Created with Raphaël 2.1.2</desc><defs><path id="raphael-marker-block" stroke-linecap="round" d="M5,0 0,2.5 5,5z"/><marker id="raphael-marker-endblock55-obj45539" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj45542" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj45545" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj45548" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj45551" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj45557" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj45560" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj45563" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj45566" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj45572" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker id="raphael-marker-endblock55-obj45575" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use fill="#000" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker></defs><rect width="79.6" height="39" x="10" y="20" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="59.6" height="19" x="20" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text x="49.8" y="39.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">run.sh</tspan></text><rect width="79.6" height="39" x="10" y="606" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="59.6" height="19" x="20" y="616" fill="#fff" stroke="none" rx="0" ry="0"/><text x="49.8" y="625.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">run.sh</tspan></text><path fill="none" stroke="#000" stroke-width="2" d="M49.79999923706055,59L49.79999923706055,606"/><rect width="127.6" height="39" x="180.8" y="20" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="107.6" height="19" x="190.8" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text x="244.6" y="39.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">Cepheus CEP</tspan></text><rect width="127.6" height="39" x="180.8" y="606" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="107.6" height="19" x="190.8" y="616" fill="#fff" stroke="none" rx="0" ry="0"/><text x="244.6" y="625.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">Cepheus CEP</tspan></text><path fill="none" stroke="#000" stroke-width="2" d="M244.60000228881836,59L244.60000228881836,606"/><rect width="156.4" height="39" x="457.2" y="20" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="136.4" height="19" x="467.2" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text x="535.4" y="39.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">Cepheus Broker</tspan></text><rect width="156.4" height="39" x="457.2" y="606" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="136.4" height="19" x="467.2" y="616" fill="#fff" stroke="none" rx="0" ry="0"/><text x="535.4" y="625.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">Cepheus Broker</tspan></text><path fill="none" stroke="#000" stroke-width="2" d="M535.3999900817871,59L535.3999900817871,606"/><rect width="108.4" height="39" x="772" y="20" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="88.4" height="19" x="782" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text x="826.2" y="39.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">IoT Agent</tspan></text><rect width="108.4" height="39" x="772" y="606" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="88.4" height="19" x="782" y="616" fill="#fff" stroke="none" rx="0" ry="0"/><text x="826.2" y="625.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">IoT Agent</tspan></text><path fill="none" stroke="#000" stroke-width="2" d="M826.1999778747559,59L826.1999778747559,606"/><rect width="174.8" height="19" x="59.8" y="74.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="147.2" y="84" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">POST /admin/config</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj45539)" d="M49.79999923706055,98C49.79999923706055,98,209.14126459242402,98,239.60127698823692,98"/><rect width="165.2" height="19" x="307.4" y="113.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="390" y="123" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/subscribe(Room*)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj45542)" d="M244.60000228881836,137C244.60000228881836,137,491.9337818212325,137,530.3985322026163,137"/><rect width="184.4" height="19" x="588.6" y="152.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="680.8" y="162" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/register(Shutter*)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj45545)" d="M826.1999778747559,176C826.1999778747559,176,578.8661983423417,176,540.401447960958,176"/><rect width="194" height="19" x="583.8" y="191.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="680.8" y="201" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/update(Room11, 26°)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj45548)" d="M826.1999778747559,215C826.1999778747559,215,578.8661983423417,215,540.401447960958,215"/><rect width="194" height="19" x="293" y="230.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="390" y="240" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/notify(Room11, 26°)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj45551)" d="M535.3999900817871,254C535.3999900817871,254,288.06621054937295,254,249.60146016798922,254"/><rect width="232.8" height="29" x="128.2" y="274" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="222.8" height="19" x="133.2" y="279" fill="#fff" stroke="none" rx="0" ry="0"/><text x="244.6" y="288.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">computes shutter status</tspan></text><rect width="270.8" height="19" x="254.6" y="318.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="390" y="328" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/update(Shutter11, &apos;closed&apos;)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj45557)" d="M244.60000228881836,342C244.60000228881836,342,491.9337818212325,342,530.3985322026163,342"/><rect width="270.8" height="19" x="545.4" y="357.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="680.8" y="367" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/update(Shutter11, &apos;closed&apos;)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj45560)" d="M535.3999900817871,381C535.3999900817871,381,782.7337696142013,381,821.198519995585,381"/><rect width="194" height="19" x="583.8" y="396.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="680.8" y="406" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/update(Room11, 23°)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj45563)" d="M826.1999778747559,420C826.1999778747559,420,578.8661983423417,420,540.401447960958,420"/><rect width="194" height="19" x="293" y="435.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="390" y="445" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/notify(Room11, 23°)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj45566)" d="M535.3999900817871,459C535.3999900817871,459,288.06621054937295,459,249.60146016798922,459"/><rect width="232.8" height="29" x="128.2" y="479" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect width="222.8" height="19" x="133.2" y="484" fill="#fff" stroke="none" rx="0" ry="0"/><text x="244.6" y="493.5" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">computes shutter status</tspan></text><rect width="270.8" height="19" x="254.6" y="523.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="390" y="533" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/update(Shutter11, &apos;opened&apos;)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj45572)" d="M244.60000228881836,547C244.60000228881836,547,491.9337818212325,547,530.3985322026163,547"/><rect width="270.8" height="19" x="545.4" y="562.5" fill="#fff" stroke="none" rx="0" ry="0"/><text x="680.8" y="572" fill="#000" stroke="none" font-family="Andale Mono, monospace" font-size="16" text-anchor="middle" style="text-anchor:middle;font-family:Andale Mono,monospace;font-size:16px"><tspan dy="5.5">/update(Shutter11, &apos;opened&apos;)</tspan></text><path fill="none" stroke="#000" stroke-dasharray="0" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj45575)" d="M535.3999900817871,586C535.3999900817871,586,782.7337696142013,586,821.198519995585,586"/></svg>